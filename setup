#!/usr/bin/env bash

# TODO: OS X
# 1) Install homebrew
# 2) Tap this: brew tap homebrew/bundle
# 3) Run this: brew bundle

DOTFILES_REPO=https://github.com/joshtronic/dotfiles
DOTFILES_DIR=~/.dotfiles

# FILEINREPO SPACE WHEREYOUWANTITLINKED
SYMLINKS=(
  "gem/gemrc ~/.gemrc"
  "git/gitconfig ~/.gitconfig"
  "mysql/my.cnf ~/.my.cnf"
  "tmux/tmux.conf ~/.tmux.conf"
  "vim/ ~/.vim"
  "zsh/zshrc ~/.zshrc"
)

PIP=(
  "premailer"
  "psutil"
)

# Checks if the directory exists
if [ ! -d "$DOTFILES_DIR" ]; then
  mkdir $DOTFILES_DIR
  git clone $DOTFILES_REPO $DOTFILES_DIR
fi

# TODO Check if the directory contains our configured repo

# Gets the latest code
cd $DOTFILES_DIR
git pull origin master
git submodule update --init --recursive

# Creates our symlinks
for SYMLINK in "${SYMLINKS[@]}"; do
  # TODO Check if the file exists and whether or not it's a symlink
  # TODO Also check if the original file exists before trying to link
  eval ln -s ${DOTFILES_DIR}/${SYMLINK}
done

vim +BundleInstall +qall

#source ~/.zshrc

# TODO Do apt-get stuff

# TODO This is old shit, need to work it in eventually
###### DOTFILES="$( cd -P "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
######
###### # Gets our Vundle on!
###### git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
###### vim +BundleInstall +qall

# TODO setup logic for defaults for nvm
# TODO setup logic for defaults for rvm

export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:/opt/X11/lib/pkgconfig

